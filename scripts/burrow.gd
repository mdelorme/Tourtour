@tool
extends Node2D

var time := 0.0
const oscillation_speed := 10.0
@export var line_point: int

func _process(delta: float) -> void:
	time += delta * oscillation_speed
	
	$Line.points[0] = $Entrance.position
	$Line.points[1] = $Exit.position
	$Line.modulate = Color(cos(time)*0.1 + 0.9, 0.5, 0.5, 1.0)

func _on_entrance(area: Area2D) -> void:
	var enemy : Enemy = area.owner as Enemy
	if enemy.can_burrow:
		enemy.global_position = $Entrance.global_position
		enemy.burrow($Exit.global_position, line_point)

# MathÃ©a est le plus mignon des chapichats -> C'est vrai !!!
'''
********************************************************************************************************************************
********************************************************************************************************************************
********************************************************************************************************************************
***************************************************************/****************************************************************
***************************//***************************/*//*//*****************************************************************
******************************/*///****///********//##%&&%%%&&%&&&&&&#&&&//*****************************************************
***********************/**********/*****/*******/(&&&&%%&%%&&&&@@@@&@@&&&@@@//*/************************************************
*************************/*******/**/**///((((*(%&@@&&@%&&@@@@@@@@@&&&&&@&%&@&@@(/(((*******************************************
*******************/****/***/*///*((%&&&%&&&%%@@@@@@@%&&&&&&&&@%@&&@@@@%%&&&&&@&&@&*//**/***************************************
**********************/*/***//##(&@&@@@@@@@&&%&&@@@@@@@@@@@@&&@@@&@@@@&%%&&&&&@@&%&%*/****/*************************************
*********************///(*/(%&#@@@@@@@@@@@@@&%&%&&&@@@&&&&%%%%%%%&%#&&%&@&%&&&@@@@&&&&******************************************
***********************//#%%%&@@@@&@@@@@@@@&&&&%%%%###(##(((((((((##%%%&%&%%&&&&@@@&%%&*****************************************
***********************/(%%%&&@@&@@@@@@@@&&&%%%###(((((////////////((###/%%%%#%%&@@@@&&#(*/******/******************************
*************/********/(%&&@#&%&@@@&&%%%%%#####((((((((((/////////*//((((##(##%%&#@@@&@&#(*//***********************************
*******************/*#@@@@@&@@&@#%%%(#((((#(((((((((//(/////////****////((((#(((#%&%&@@@&@&%//**********************************
*******************%&@@@@@@&&@&%%#(#((((((((((((((((((///////////****////////((((#(%%&&&&%%&&&*******/**************************
******************//@@@@@@@@%%%###((((((((((((((((((((///////////********//////((###%%&&&&&&&&&%/*******************************
*****************/%@@@@@@@&&%#####(#((((((((((((((((///////////*/*********/*/////(#%%%&&&&&%&&%%#/******************************
***************//(@@@@&@@&&%######((((((((((((///(((/(////////////////(((((###(///((##%%&&&@&&&%#//**********/******************
****************#@@@@@@@@&%%%#####((((((((((//(////((/(///(((((##%&&&%&&%%%%%%%%%((((((#%&&&&&&&&%(/****************************
**************(/@@&@@@&&&%%%%#####(((((((((((((///(((((((((###%%%&&&&%%%((/(((/(((###((/((%%&&%%%&/(**/*************************
**************/#@@&&@&&%%%%%%####((((((((((((((((((((/((((###%%%%%&&%#(((((((((#(((((((///((%&%&%%#((///************************
*************//@@@@&@&&&&%%%%#####(##############(((((///(((##%&&&%&&%##((/(((%%%(###((//////(%&%&%#(/(/************************
**************(@@@@&@&&&&%%%######%%&&&&&&&%&%%%%%##((//*///(%&&&&%%%%%@@@@@&&&%#%%%%#((//////(%&&%%%%/((*************/*********
**************(&&@&@@&&&&%%####&&&@&&&&&&&&%%&%%%%%##(//**//(#&&&&&&&%@&@@@@%#%#%&&%%##(////////%&&%%%&//***********************
**************&&@@@&&&@&%%%#%&&&%%%%%%&%&&&&&&&&&&%%#(///*///((#&@@&%%%%%#%####(/////*****//////#%&&&&&%(((*/*********/*********
*************/&@@@@@&@#&%%%&&&%########&&#%&@@@@&&&%#(///**//////(#%%%##((((//////********///////#%&&%###/(*//**/***************
************//%@@@@@@@@&%%&&%%%%#%%&###%%%&&&&@&&&&%%(///////////////////////////******//////////(%&&#%%%*////******************
*****/***//***/&@@@&&@@%%%&%%%%%%%%%&@@@@@@%&&&&&%%%#(//////////////**//////////*********/////////#%&%%%#**/***/****************
***********(///&@@@@@@&%%%%%%%%%&&&@%%@######%#%%%###((//(//////////(#((((((((//**/////////////////%%%%%#(*************/********
************///%&@@@@@&%%%#%%%%%&@&%%%%%%&#((((###%#############((///(#%%#####(((//////////////////(%##%#%((/*******************
***********//(/(&&&@@&&%%##%%%%&&%%%&##(/////(((##%%%%%%%%%##&&@@&&%####%%%%%###(((((((////////////(%%(#@@&((#/#****************
**************//%@@@@&&%##%%%%%((((////////////(%###%&@@&%%%#%%&&&&@(////(%%%%%####((((((///////////%%#(@@&#&%(//(/**/**********
**************//%@@@&&&#####(((((((((/////////(#%##%&&&&&%%%%%%%///////*///(#%%%%%%###(((///////////(#(/%@&&&&%#((//***///**/***
***************/%&@&@@&##########((((((///////(%%%%&&&%%%%%%%%#(//*/*///////(##%%%%%###(((//////////(//%%@&@&&%#/(((////***,/***
****************/#&@@@&&##########((((((((((/(#%%%%%%%%%%#%#((////((////////((#%%%%&%%#((((/////////(#&@&@&@&&%%(/**(((*//******
***********/***/(((&@&@&%%############(((((((#%%%#########(#####%#######%%%%%%&&&&&%%#(((((/////////(##@@@@@@&@%/#/(*/(/*((*****
*****************//&&@@&&###############((((###%%%###%#%%%%%%%%%%&@&(*///(/(//((####(((((((//////////%@@@&&&@(&%((*/#(/,(////**/
**************//**/&@&&@&&###################%%%####%%%%&&&@@%(////**////////////(#(((((((((////////#@@@&&&@&&&@#,*/**((//*//***
****************/(&@@@@@@@&################%%%%%%%%%&&&&#(((/(((####((///////////(/(((((((((((((/(((@@@@@&&&&&%%#%/****/(/(//(**
****************#%@@@@@@@@@&##############%%&%%&&&&%%%###############((////////**///(((((((((((((((#@@@@&&%&&&&#%#(///,*///,/*/(
**********/***/#&@@@@@@@@@@&%##############%%%&&%%%###########%%###(((/***********///(((((((((((((#&&@&@&&&&&&%%%%%//***//(/(*(*
********/*****&&&@@@@@@@@@@@&%###############%#%#%############(/////***************////((((((((#(#&@&@@@&&%&@%&%%%%&#*/*/****/**
************/#(%&@@@@@@@@@@@@&%###########################((///////////************////((((((####@@@%@&&&%&&%&&%%%%#%(/(/*/***/#
**********/((%(&@@@@@@@@@@@@@@@%%######################((((///////////////////////////((((####%%&@@@&@@%@@&&&@&&%%&&#(#/(*(/****
********/(,(((%@@@@@@@@@@@@@@@@@@%#####################(((((((((((((((((((((/((//(((((######%%%#%@@&&@&&%&&#%&&%%%&&%&%(/*//*/**
*******#**((((&@@@@@@@@@@@@@@@@@@@@#%#####################((((#((#((#######(####(######%##%%%%%#%@@%%&%&%&&#&&&%%%&%%%%&@%%#%##%
*****(**//(#/#&&@@@@@@@@@@@@@@@@@@@@@%%###############################################%%%%%%&%%%@@@@@@@&%&&&&&&&%%&&%#%%%%%&&%%%
***/**/*//(/((&@@@@@@@@@@@@@@@@@@@@@@@@&%#####%##################################%%%%%%%%&&%%%%&@@@%@&%@&&&&@@&&&%&%%%%&%&#%&%%%
****//*/*(//*(&@@@@@@@@@@@@@@@@@@@@@@@@@@&%%#%############%##%%#############%#%%%%%%%%%&&&&&&%&@@%@@&&@%%%&&@@&@&%&%%%%&&&%%&&&%
**********//*%&@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%%%%###########################%%%%%%%%%%&%&&&&&&&@&@@@&%%&&&&@@@&@&%#@&%#%&%&%%%#%%
********(**%(#&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%%%%%########################%%%%%%%%&%&&&&&&&&%&%&@@@@@%&&&@&&&@@###@%%%%&%&%%%%%#
*****/*/*(((&#@&@@@&@@@@@@@@@@@@@@@@@@@@@@@@&&%%%%%%#####################%%%%%%%%&%&&&&@&@&%&%@&@@@@&@%@&%&&%&@#%%%%#%%%%&%%%##%
*****((/##%/%#&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&%%%%%%######%%#########%%%%%%%%&%&&&&&&&&&&&@&&@@@@@@&&@&%&&&&@%%%#(#%%&%%%%#%%##
//*/(%%&%%#%%%&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&%%%%%%%%%#############%%%%%%%%&&&&&&&&&&@&&%&@@&@%@&&%@%@&&&%@%#%%@#%###%%%&####
#(#(#%#%#%%%&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&%%%%%%#%##%#########%%%%%%%%&&&&&@&%&&@%&&&&%@@&@&&&&@&&@@@&%%#%%%#@@@%%@%%###(
&%#&&&&&&@&&&@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&%%%%%%##########%%%%%%%%%%&%&&&&@&&@&@&@%&@&@@@&@%%%@%@&@&@&#&%#%%@@@&@@&%&%(#
&&&&%&%&@&&&@@&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&%&&%%%%#%%#%%%%#%%%%%%%%%%&&&&&%&%&&%%@&&@@@@@%@&@&&&&@&@@&%(#%#%&&@@@@@&&%%%#
@&@%&&@@@&&@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&%%%%%%%##%%#%#%%%%%%%%%%%&&&&%%%%&&#%%%@@@%&@&%@&@@@@@@@&&&#%#%&&@&@@@&@%&%&
&%%&%&&&#&@@@@%@@@@@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%&%&%%%%%%%##%%%%%%%%%%&&&%%&%%%&&%@&&@@&@@&&%&%&&@&@@%&@&%%&&#%@&&%&&&@%%#%
&@&&%%%%&%@@@@&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&%%%%%%%%%%%%%%%%%%%&&&%%&%#%%&&@@%#@@@@@@@&&&@@@%@@&@@@@&%&%%%&@&@@@&%&/(#
#&&&%&&&&@@@@@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&%&%%%%%%%%%%%%%%&&%%&%%%%%%%&@&@%&@@%&@@&&@%@@@@&&&&&@@@%@&&&%%#(@&@#%(#&
&&&%%&&&&@&@@@&@@@@@@&@@@@@@@&@@@@@@@@@@@@@@@@@@@@@@@@@@&&%%%%%%%%#%%%%#%%%%%%%&%&&%&&@@@@@@@@@@%@@@%&@%@@&&#%@%#&&&&&%&#%&%#(%%
%%#&&&&&@&@&&@&&@@@@%&@@@@@@@&@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&%%%%%%%%%%%%%%%%%%&&@&&%@@@@@@@@@@&&&@@@@&@&@#(&@#@%&&&@&&&&@##(%%(
%&&&&@&@#&&@@&&&&@@@&@&@@@@@@&&&@@@@@@@@@@@@@@@@@@@@@@@@&@&&&&%%%%%%%%%%%%%%%@&%%&&&@@@@@@@@@@&@@@@@@@&@&#&&@@&%&%@%@&%%%##(##//
%&&@&%&&%&&&%%@%&&@@&@&@@@@@&@%%&@@@@@@@@@@@@@@@@@@@@@@@@&&&&&%%%%%%%#%%%%%%%&%(%&%@@@@@%@%&@@@@@&@@@@&&&%@@&&@&&#&&&&&%##%&(**%
@%(#%%%%&&&&%@&@@%@%@@&%&@@@&&&@%#&%@@@@@@@@@@@@@@@@@@@%@@%&&%&%%%%%#&%%%(/#%##%%@%&@@@&@@@@@@@@@&@&&%&&%%%@@@%&&&@&&%&%#%(/(%&&
&%###%%&&&@&%&&%&%@%@@&&&&@@&&%#&##%#@@@@@@@@@@@@@@@@@@&@@&@&#%##%##(%%(/###%&%&&@@@@@@@@@@@@&@@&%@%@&@&&&&&#%&&@%%%&&&%(/*#%%&&
&%%%%%%&&&&&%%@%@%#@&@@&@@&@@&@#%%#(&@@@@@@@@@@@@@@@@@@@@@&&%%%%%#%#(##%#/#%%&&&&@@@@@@@@@&@@&&@&%@@@&%&%&#&%&&%%&@&&%((((%&@@&@
%@&&#%%@%&@@%&&%%&%&@&&%%@@@@@@%%#%%(#(@@@@@@&@&@@#@@@#&@&%&&%%%##%#(/##(%#(&#@@@&&%&@@@&@@&&&&&%%%%&@&&&%@#%%#%##%%#(#*&&&@@@@&
@@&@%%&&&@&&&%&&%%(%@@@#&@@@@@@#@@(%##%##&&@&&&&@@&&%@@&@@&&&&%%%##%(#/%%%&&&&&&&&@@@&%&@@&&&%##%&&&&&&#(%%%#%#%@(%((/@&%%%%*(**
@@&@%##%@&&@&&&@%&%%%@&%%%%@@@@@@&#%(###%#&%&@%&%@%&#&&&@&&@&%##%&&&&&&%&&&@&&%%&@#%@&&&&@&&@&&%&&&@@&&&@%%%#&&&(//*/%#/,,,,*,,*
&@%@&%&@&#&&%&@&&#(%&#@&&#&@&@@@@@@%((##@#%%##%&###&&%&&@@%%@&@%@##%#%%%&%&&@&%&%%%&&&&&&&&%@%&&&&%%#%&%@&%&@@@#(((@@,***,,,,,,,
%@@&%%%%%%%&%%%&&&%%&(&#%&&&%&&@&&@@%%#%%&&@&&#%%(%(&&&&@@@@&&&&%##&%%%%@&&@&&&&%&%%&&##%&&@@@%%&%%%#&&%##@@@@@%@%/,#%&#***,,**,
'''

